function e(e){return"0x"+e.map((e=>e.toString(16).padStart(2,"0"))).join("")}function t(e,t=0){let r=0,n=0,s=[];for(;;){if(t>=e.length)throw new RangeError("buffer overflow");let i=e[t++];if(n|=(127&i)<<r,r+=7,r>=8&&(s.push(255&n),n>>=8,r-=8),i<=127)break}return r&&s.push(n),[s.reverse(),t]}function r(r,n){[r,n]=t(r,n);let s=parseInt(e(r));if(!Number.isSafeInteger(s))throw new RangeError("unsafe");return[s,n]}function n(e,t,r=0){if("number"==typeof t&&!Number.isSafeInteger(t))throw new RangeError("unsafe");if((t=BigInt(t))<0)throw new RangeError("negative");const n=127n;for(;t>n;)e[r++]=128|Number(t&n),t>>=7n;return e[r++]=Number(t),r}var s=Object.freeze({__proto__:null,read:r,readBigInt:function(r,n){return[r,n]=t(r,n),[BigInt(e(r)),n]},readBytes:t,readHex:function(r,n){return[r,n]=t(r,n),[e(r),n]},write:n});class i{constructor(e){let t=this.chars=[...e];this.map=new Map(t.map(((e,t)=>[e,t])))}get length(){return this.map.size}indexOf(e){let t=this.map.get(e);if(!Number.isInteger(t))throw new TypeError(`invalid digit "${e}"`);return t}encode(e){return Array.from(e,(e=>this.chars[e])).join("")}}class o{constructor(e){let t=this.table=new i(e),r=t.length,n=this.bits=Math.log2(r);if(r<2||!Number.isInteger(n))throw new TypeError;t.chars.push("=")}decode(e){let{table:t,bits:r}=this,n=e.length,s=0,i=0,o=0;for(;n&&"="==e[n-1];)--n;let a=new Uint8Array(n*r>>3);for(let h=0;h<n;h++)i=i<<r|t.indexOf(e[h]),o+=r,o>=8&&(a[s++]=i>>(o-=8)&255);if(i<<8-o&255)throw new Error("invalid");return a}encode(e,t){let{table:r,bits:n}=this,s=(1<<n)-1,i=0,o=0,a=[];for(let t=0,r=e.length;t<r;t++)for(i=i<<8|e[t],o+=8;o>=n;)a.push(i>>(o-=n)&s);for(o&&a.push(i<<n-o&s);t&&a.length*n&7;)a.push(s+1);return r.encode(a)}}class a{constructor(e){this.table=new i(e)}decode(e){let{table:t}=this,r=t.length,n=e.length,s=new Uint8Array(n),i=0;for(let n of e){let e=t.indexOf(n);for(let t=0;t<i;t++)e+=s[t]*r,s[t]=e,e>>=8;for(;e;)s[i++]=e,e>>=8}for(let r=0;r<n&&e[r]===t.chars[0];r++)i++;return s.subarray(0,i).reverse()}encode(e){let{table:t}=this,r=t.length,n=[];for(let t of e){for(let e=0;e<n.length;++e){let s=n[e]<<8|t;n[e]=s%r,t=s/r|0}for(;t;)n.push(t%r),t=t/r|0}for(let t=0;t<e.length&&!e[t];t++)n.push(0);return t.encode(n.reverse())}}const h=new i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),c=[996825010,642813549,513874426,1027748829,705979059];function l(e){let t=1;for(let r of e){let e=t>>25;t=(33554431&t)<<5^r;for(let r=0;r<5;r++)e>>r&1&&(t^=c[r])}return t}function u(e){let t=Array.from(e,(t=>{let r=t.codePointAt(0);if(r<33||r>126)throw new Error(`invalid hrp character: ${e}`);return r})),r=t.length;if(!r||r>83)throw new Error("invalid hrp length");return[...t.map((e=>e>>5)),0,...t.map((e=>31&e))]}class f{constructor(e,t,r=1){this.hrp=e,this.v32=t,this.type=r}toString(){return this.hrp+"1"+h.encode(this.v32)+h.encode(function(e,t,r){let n=l([...u(t),...r,0,0,0,0,0,0])^e;return[25,20,15,10,5,0].map((e=>n>>e&31))}(this.type,this.hrp,this.v32))}static decode(e){let t=e.toLowerCase();if(e!==t&&e!==e.toUpperCase())throw new Error("mixed case");let r=t.lastIndexOf("1");if(r<1)throw new Error("no hrp");if(t.length-r<7)throw new Error("no check");let n=t.slice(0,r),s=Uint8Array.from(t.slice(r+1),(e=>h.indexOf(e)));return new this(n,s.subarray(0,-6),l([...u(n),...s]))}}Object.defineProperty(f,"M",{value:734539939,writable:!1,configurable:!1});const d=new Map;class w{static[Symbol.iterator](){return d.values()}static decode(e){let t=e.codePointAt(0),r=this.for(String.fromCodePoint(t)),n=r.decode(e.slice(t<65536?1:2));return{base:r,data:n}}static for(e){if(e instanceof this)return e;let t=d.get(e);if(!t)throw new Error(`unknown multibase: ${e}`);return t}constructor(e,t){if("string"!=typeof e||1!==e.length)throw new TypeError("invalid prefix");this.prefix=e,this.name=t,d.set(e,this)}encodeWithPrefix(e){return this.prefix+this.encode(e)}}class p{static from(e){"string"==typeof e&&(e=w.decode(e));let t,[n,s]=r(e);if([t,s]=r(e,s),(e=new Uint8Array(e.slice(s))).length!==t)throw new Error(`expected ${t}, got ${e.length} bytes`);return new this(n,e)}constructor(e,t){this.codec=e,this.data=t}get bytes(){let e=[];return this.write(e,0),Uint8Array.from(e)}write(e,t){let{data:r,codec:s}=this;return t=n(e,r.length,n(e,s,t)),r.forEach((r=>e[t++]=r)),t}}function g(e,t,r,n,s=[]){let i=0,o=0,a=(1<<r)-1;for(let n of e){if(n<0||n>>t)throw new Error("invalid digit");for(i=(65535&i)<<t|n,o+=t;o>=r;)o-=r,s.push(i>>o&a)}if(n)o&&s.push(i<<r-o&a);else if(o>=t||i<<r-o&a)throw new Error("malformed");return Uint8Array.from(s)}const b="ABCDEFGHIJKLMNOPQRSTUVWXYZ",m=b.toLowerCase(),y="0123456789";function v(e){return e.replaceAll(/[0OIl]/g,"")}const x=new o(b+m+y+"+/"),E=new o(b+m+y+"-_"),A=new a(v(y+b+m)),I=new a(v(y+m+b)),C=new a(y+m),S=new o("ybndrfg8ejkmcpqxot1uwisza345h769"),U=new o(y+m.slice(0,-4)),O=new o("abcdefghijklmnopqrstuvwxyz234567"),k=new o(y+"abcdef"),j=new a(y),z=new o("01234567"),M=new o("01");class N extends w{constructor(e,t,r,{casing:n,padding:s}={}){super(e,t),this.coder=r,this.casing=n,this.padding=s}decode(e){return void 0!==this.casing&&(e=e.toLowerCase()),this.coder.decode(e)}encode(e){let t=this.coder.encode(e,this.padding);return this.casing&&(t=t.toUpperCase()),t}}new N("0","base2",M),new N("7","base8",z),new N("9","base10",j),new N("f","base16",k,{casing:!1}),new N("F","base16upper",k,{casing:!0}),new N("v","base32hex",U,{casing:!1}),new N("V","base32hexupper",U,{casing:!0}),new N("t","base32hexpad",U,{casing:!1,padding:!0}),new N("T","base32hexpadupper",U,{casing:!0,padding:!0}),new N("b","base32",O,{casing:!1}),new N("B","base32upper",O,{casing:!0}),new N("c","base32pad",O,{casing:!1,padding:!0}),new N("C","base32padupper",O,{casing:!0,padding:!0}),new N("h","base32z",S),new N("k","base36",C,{casing:!1}),new N("K","base36upper",C,{casing:!0}),new N("z","base58btc",A),new N("Z","base58flickr",I),new N("m","base64",x),new N("M","base64pad",x,{padding:!0}),new N("u","base64url",E),new N("U","base64urlpad",E,{padding:!0});class P{static from(e){let t;if("string"==typeof e)if(46==e.length&&e.startsWith("Qm"))e=A.decode(e);else if(({base:t,data:e}=w.decode(e)),18==e[0])throw new Error("CIDv0 cannot be multibase");try{if(18==e[0]){if(32!==e[1])throw new Error("CIDv0 must be SHA2-256");return new $(p.from(e))}let[n,s]=r(e);if(1===n){let n;return[n,s]=r(e,s),new B(n,p.from(e.slice(s)),t)}throw new Error(`unsupported version: ${n}`)}catch(e){throw new Error(`Malformed CID: ${e.message}`)}}upgrade(){return this}}class $ extends P{constructor(e){super(),this.hash=e}get version(){return 0}get codec(){return 112}get bytes(){return this.hash.bytes}upgrade(){return new B(this.codec,this.hash)}toString(){return A.encode(this.bytes)}}class B extends P{constructor(e,t,r){super(),this.codec=e,this.hash=t,this.base=r}get version(){return 1}get bytes(){let e=[];return this.hash.write(e,n(e,this.codec,n(e,this.version))),Uint8Array.from(e)}toString(e){return w.for(e||this.base||"b").encodeWithPrefix(this.bytes)}}export{j as Base10,k as Base16,M as Base2,O as Base32,U as Base32Hex,S as Base32Z,C as Base36,A as Base58BTC,I as Base58Flickr,x as Base64,E as Base64URL,z as Base8,f as Bech32,P as CID,$ as CIDv0,B as CIDv1,w as Multibase,N as Multibased,p as Multihash,a as Prefix0,o as RFC4648,g as convert,s as uvarint};
